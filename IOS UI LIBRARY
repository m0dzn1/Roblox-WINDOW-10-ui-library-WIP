-- iOS / iPadOS Style UI Library
-- Fully Standalone | Dark Mode | No Rainbows

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local Mouse = Players.LocalPlayer:GetMouse()

local Library = {
    Flags = {},
    Theme = {
        Background = Color3.fromRGB(0, 0, 0),       -- Pure Black (OLED)
        Sidebar = Color3.fromRGB(28, 28, 30),       -- System Gray 6
        Content = Color3.fromRGB(0, 0, 0),
        Card = Color3.fromRGB(28, 28, 30),          -- System Gray 6
        Text = Color3.fromRGB(255, 255, 255),
        SubText = Color3.fromRGB(142, 142, 147),    -- System Gray
        Accent = Color3.fromRGB(10, 132, 255),      -- iOS Blue
        Success = Color3.fromRGB(48, 209, 88),      -- iOS Green
        Divider = Color3.fromRGB(56, 56, 58)        -- Separator
    }
}

-- // Utility: Draggable //
local function MakeDraggable(trigger, object)
    local dragging, dragInput, dragStart, startPos
    trigger.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true; dragStart = input.Position; startPos = object.Position
            input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
        end
    end)
    trigger.InputChanged:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement then dragInput = input end end)
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            object.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

function Library:CreateWindow(config)
    local Title = config.Title or "Settings"
    local LP = Players.LocalPlayer

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "iOS_Lib_" .. math.random(1000,9999)
    ScreenGui.ResetOnSpawn = false
    pcall(function() ScreenGui.Parent = CoreGui end)
    if not ScreenGui.Parent then ScreenGui.Parent = LP:WaitForChild("PlayerGui") end

    -- Main Container (iPad Split View Style)
    local Main = Instance.new("CanvasGroup")
    Main.Size = UDim2.new(0, 750, 0, 480)
    Main.Position = UDim2.new(0.5, -375, 0.5, -240)
    Main.BackgroundColor3 = Library.Theme.Background
    Main.BorderSizePixel = 0
    Main.Parent = ScreenGui

    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 14) -- iOS Rounded Corners

    -- Sidebar (Left)
    local Sidebar = Instance.new("Frame", Main)
    Sidebar.Size = UDim2.new(0, 220, 1, 0)
    Sidebar.BackgroundColor3 = Library.Theme.Sidebar
    Sidebar.BorderSizePixel = 0
    
    -- Sidebar Title
    local Header = Instance.new("TextLabel", Sidebar)
    Header.Text = Title
    Header.Size = UDim2.new(1, -30, 0, 60); Header.Position = UDim2.new(0, 15, 0, 10)
    Header.Font = Enum.Font.GothamBold; Header.TextSize = 24
    Header.TextColor3 = Library.Theme.Text; Header.TextXAlignment = Enum.TextXAlignment.Left
    Header.BackgroundTransparency = 1

    -- Tab Container
    local TabScroll = Instance.new("ScrollingFrame", Sidebar)
    TabScroll.Size = UDim2.new(1, 0, 1, -80); TabScroll.Position = UDim2.new(0, 0, 0, 70)
    TabScroll.BackgroundTransparency = 1; TabScroll.ScrollBarThickness = 0
    Instance.new("UIListLayout", TabScroll).Padding = UDim.new(0, 5)

    -- Content Area (Right)
    local ContentArea = Instance.new("Frame", Main)
    ContentArea.Size = UDim2.new(1, -220, 1, 0); ContentArea.Position = UDim2.new(0, 220, 0, 0)
    ContentArea.BackgroundColor3 = Library.Theme.Background -- Pure Black
    ContentArea.BorderSizePixel = 0

    MakeDraggable(Sidebar, Main)

    local Window = {}
    local FirstTab = true

    function Window:AddTab(name, iconId)
        -- Tab Button (iOS Sidebar Item)
        local TabBtn = Instance.new("TextButton", TabScroll)
        TabBtn.Size = UDim2.new(1, -20, 0, 34)
        TabBtn.Position = UDim2.new(0, 10, 0, 0) -- Centered with padding
        TabBtn.BackgroundColor3 = Library.Theme.Sidebar
        TabBtn.BackgroundTransparency = 1
        TabBtn.Text = "   " .. name
        TabBtn.TextColor3 = Library.Theme.Accent
        TabBtn.Font = Enum.Font.Gotham; TabBtn.TextSize = 15; TabBtn.TextXAlignment = Enum.TextXAlignment.Left
        Instance.new("UICorner", TabBtn).CornerRadius = UDim.new(0, 8)

        local Page = Instance.new("ScrollingFrame", ContentArea)
        Page.Size = UDim2.new(1, 0, 1, 0); Page.BackgroundTransparency = 1; Page.Visible = false
        Page.ScrollBarThickness = 3; Page.ScrollBarImageColor3 = Library.Theme.SubText
        
        local PageLayout = Instance.new("UIListLayout", Page)
        PageLayout.Padding = UDim.new(0, 12); PageLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
        
        -- Padding at top
        local Pad = Instance.new("Frame", Page); Pad.Size = UDim2.new(1, 0, 0, 10); Pad.BackgroundTransparency = 1

        PageLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            Page.CanvasSize = UDim2.new(0, 0, 0, PageLayout.AbsoluteContentSize.Y + 20)
        end)

        local function Activate()
            for _, v in pairs(ContentArea:GetChildren()) do if v:IsA("ScrollingFrame") then v.Visible = false end end
            for _, v in pairs(TabScroll:GetChildren()) do 
                if v:IsA("TextButton") then 
                    TweenService:Create(v, TweenInfo.new(0.2), {BackgroundTransparency = 1}):Play()
                    v.TextColor3 = Library.Theme.Accent 
                end 
            end
            
            Page.Visible = true
            TweenService:Create(TabBtn, TweenInfo.new(0.2), {BackgroundTransparency = 0.85}):Play() -- Highlight
            TabBtn.BackgroundColor3 = Library.Theme.Accent
        end

        TabBtn.MouseButton1Click:Connect(Activate)
        if FirstTab then Activate(); FirstTab = false end

        local Tab = {}

        -- 1. STRUCTURAL: Section (iOS Group Header)
        function Tab:AddSection(text)
            local Label = Instance.new("TextLabel", Page)
            Label.Size = UDim2.new(0.9, 0, 0, 30)
            Label.Text = string.upper(text)
            Label.TextColor3 = Library.Theme.SubText
            Label.Font = Enum.Font.GothamMedium; Label.TextSize = 11
            Label.BackgroundTransparency = 1; Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.TextYAlignment = Enum.TextYAlignment.Bottom
        end

        -- 2. INTERACTIVE: Button (iOS Action Button)
        function Tab:AddButton(title, callback)
            local BtnFrame = Instance.new("Frame", Page)
            BtnFrame.Size = UDim2.new(0.9, 0, 0, 44)
            BtnFrame.BackgroundColor3 = Library.Theme.Card
            Instance.new("UICorner", BtnFrame).CornerRadius = UDim.new(0, 10)

            local Btn = Instance.new("TextButton", BtnFrame)
            Btn.Size = UDim2.new(1, 0, 1, 0); Btn.BackgroundTransparency = 1
            Btn.Text = title; Btn.TextColor3 = Library.Theme.Accent
            Btn.Font = Enum.Font.Gotham; Btn.TextSize = 16

            Btn.MouseButton1Click:Connect(function()
                TweenService:Create(BtnFrame, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(44, 44, 46)}):Play()
                task.wait(0.1)
                TweenService:Create(BtnFrame, TweenInfo.new(0.3), {BackgroundColor3 = Library.Theme.Card}):Play()
                pcall(callback)
            end)
        end

        -- 3. INTERACTIVE: Toggle (iOS Switch)
        function Tab:AddToggle(title, desc, flag, default, callback)
            Library.Flags[flag] = default or false
            
            local Container = Instance.new("Frame", Page)
            Container.Size = UDim2.new(0.9, 0, 0, 44)
            Container.BackgroundColor3 = Library.Theme.Card
            Instance.new("UICorner", Container).CornerRadius = UDim.new(0, 10)

            local T = Instance.new("TextLabel", Container)
            T.Text = title; T.Size = UDim2.new(1, -60, 1, 0); T.Position = UDim2.new(0, 15, 0, 0)
            T.TextColor3 = Library.Theme.Text; T.Font = Enum.Font.Gotham; T.TextSize = 16
            T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left

            -- Switch Track
            local Switch = Instance.new("Frame", Container)
            Switch.Size = UDim2.new(0, 50, 0, 30); Switch.Position = UDim2.new(1, -65, 0.5, -15)
            Switch.BackgroundColor3 = Library.Flags[flag] and Library.Theme.Success or Color3.fromRGB(58, 58, 60)
            Instance.new("UICorner", Switch).CornerRadius = UDim.new(1, 0)

            -- Switch Knob
            local Knob = Instance.new("Frame", Switch)
            Knob.Size = UDim2.new(0, 26, 0, 26)
            Knob.Position = Library.Flags[flag] and UDim2.new(1, -28, 0.5, -13) or UDim2.new(0, 2, 0.5, -13)
            Knob.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            Instance.new("UICorner", Knob).CornerRadius = UDim.new(1, 0)
            
            -- Hidden Button
            local Trigger = Instance.new("TextButton", Container)
            Trigger.Size = UDim2.new(1, 0, 1, 0); Trigger.BackgroundTransparency = 1; Trigger.Text = ""

            Trigger.MouseButton1Click:Connect(function()
                Library.Flags[flag] = not Library.Flags[flag]
                local State = Library.Flags[flag]
                
                local GoalColor = State and Library.Theme.Success or Color3.fromRGB(58, 58, 60)
                local GoalPos = State and UDim2.new(1, -28, 0.5, -13) or UDim2.new(0, 2, 0.5, -13)
                
                TweenService:Create(Switch, TweenInfo.new(0.2), {BackgroundColor3 = GoalColor}):Play()
                TweenService:Create(Knob, TweenInfo.new(0.2, Enum.EasingStyle.Back), {Position = GoalPos}):Play()
                
                if callback then callback(State) end
            end)
        end

        -- 4. INTERACTIVE: Slider
        function Tab:AddSlider(title, flag, min, max, default, callback)
            Library.Flags[flag] = default or min
            
            local Container = Instance.new("Frame", Page)
            Container.Size = UDim2.new(0.9, 0, 0, 60)
            Container.BackgroundColor3 = Library.Theme.Card
            Instance.new("UICorner", Container).CornerRadius = UDim.new(0, 10)

            local T = Instance.new("TextLabel", Container)
            T.Text = title; T.Position = UDim2.new(0, 15, 0, 10)
            T.TextColor3 = Library.Theme.Text; T.Font = Enum.Font.Gotham; T.TextSize = 16
            T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left

            local Val = Instance.new("TextLabel", Container)
            Val.Text = tostring(default); Val.Position = UDim2.new(1, -50, 0, 10)
            Val.TextColor3 = Library.Theme.SubText; Val.Font = Enum.Font.Gotham; Val.TextSize = 14
            Val.BackgroundTransparency = 1

            local Track = Instance.new("Frame", Container)
            Track.Size = UDim2.new(1, -30, 0, 4); Track.Position = UDim2.new(0, 15, 0, 40)
            Track.BackgroundColor3 = Color3.fromRGB(58, 58, 60); Instance.new("UICorner", Track)

            local Fill = Instance.new("Frame", Track)
            Fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
            Fill.BackgroundColor3 = Library.Theme.Accent; Instance.new("UICorner", Fill)

            local Knob = Instance.new("Frame", Fill) -- iOS Sliders don't always have knobs, but helps usability
            Knob.Size = UDim2.new(0, 20, 0, 20); Knob.Position = UDim2.new(1, -10, 0.5, -10)
            Knob.BackgroundColor3 = Color3.fromRGB(255, 255, 255); Instance.new("UICorner", Knob).CornerRadius = UDim.new(1, 0)
            
            local Trigger = Instance.new("TextButton", Container)
            Trigger.Size = UDim2.new(1, 0, 1, 0); Trigger.BackgroundTransparency = 1; Trigger.Text = ""
            
            local dragging = false
            local function Update(input)
                local percent = math.clamp((input.Position.X - Track.AbsolutePosition.X) / Track.AbsoluteSize.X, 0, 1)
                local value = math.floor(min + (max - min) * percent)
                Fill.Size = UDim2.new(percent, 0, 1, 0)
                Val.Text = tostring(value)
                Library.Flags[flag] = value
                if callback then callback(value) end
            end

            Trigger.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true; Update(i) end end)
            UserInputService.InputChanged:Connect(function(i) if dragging and i.UserInputType == Enum.UserInputType.MouseMovement then Update(i) end end)
            UserInputService.InputEnded:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end end)
        end

        -- 5. INTERACTIVE: Textbox
        function Tab:AddTextbox(title, flag, placeholder, callback)
            local Container = Instance.new("Frame", Page)
            Container.Size = UDim2.new(0.9, 0, 0, 44)
            Container.BackgroundColor3 = Library.Theme.Card
            Instance.new("UICorner", Container).CornerRadius = UDim.new(0, 10)

            local T = Instance.new("TextLabel", Container)
            T.Text = title; T.Position = UDim2.new(0, 15, 0, 0); T.Size = UDim2.new(0.4, 0, 1, 0)
            T.TextColor3 = Library.Theme.Text; T.Font = Enum.Font.Gotham; T.TextSize = 16
            T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left

            local Input = Instance.new("TextBox", Container)
            Input.Size = UDim2.new(0.5, 0, 0, 44); Input.Position = UDim2.new(1, -15, 0, 0)
            Input.AnchorPoint = Vector2.new(1, 0)
            Input.BackgroundTransparency = 1; Input.TextColor3 = Library.Theme.SubText
            Input.PlaceholderText = placeholder or "Value"; Input.Font = Enum.Font.Gotham
            Input.TextSize = 16; Input.TextXAlignment = Enum.TextXAlignment.Right

            Input.FocusLost:Connect(function(enter)
                if enter then
                    Library.Flags[flag] = Input.Text
                    if callback then callback(Input.Text) end
                end
            end)
        end

        -- 6. INTERACTIVE: Dropdown (iOS Action Sheet style)
        function Tab:AddDropdown(title, flag, options, callback)
            local Expanded = false
            local DropFrame = Instance.new("Frame", Page)
            DropFrame.Size = UDim2.new(0.9, 0, 0, 44)
            DropFrame.BackgroundColor3 = Library.Theme.Card; DropFrame.ClipsDescendants = true
            Instance.new("UICorner", DropFrame).CornerRadius = UDim.new(0, 10)

            local T = Instance.new("TextLabel", DropFrame)
            T.Text = title; T.Position = UDim2.new(0, 15, 0, 0); T.Size = UDim2.new(1, 0, 0, 44)
            T.TextColor3 = Library.Theme.Text; T.Font = Enum.Font.Gotham; T.TextSize = 16
            T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left

            local Selected = Instance.new("TextLabel", DropFrame)
            Selected.Text = "Select >"; Selected.Position = UDim2.new(1, -15, 0, 0); Selected.Size = UDim2.new(0, 100, 0, 44)
            Selected.AnchorPoint = Vector2.new(1, 0); Selected.TextColor3 = Library.Theme.SubText
            Selected.Font = Enum.Font.Gotham; Selected.TextSize = 14; Selected.BackgroundTransparency = 1
            Selected.TextXAlignment = Enum.TextXAlignment.Right

            local Trigger = Instance.new("TextButton", DropFrame)
            Trigger.Size = UDim2.new(1, 0, 0, 44); Trigger.BackgroundTransparency = 1; Trigger.Text = ""

            local ListLayout = Instance.new("UIListLayout", DropFrame)
            ListLayout.SortOrder = Enum.SortOrder.LayoutOrder

            -- Container for items (starts hidden)
            local ItemsHolder = Instance.new("Frame", DropFrame)
            ItemsHolder.Size = UDim2.new(1, 0, 0, 0); ItemsHolder.Position = UDim2.new(0, 0, 0, 44)
            ItemsHolder.BackgroundTransparency = 1
            local ItemsList = Instance.new("UIListLayout", ItemsHolder)

            for _, opt in pairs(options) do
                local OptBtn = Instance.new("TextButton", ItemsHolder)
                OptBtn.Size = UDim2.new(1, 0, 0, 44); OptBtn.BackgroundColor3 = Library.Theme.Card
                OptBtn.Text = opt; OptBtn.TextColor3 = Library.Theme.Accent; OptBtn.Font = Enum.Font.Gotham
                OptBtn.TextSize = 16
                
                -- Separator
                local Div = Instance.new("Frame", OptBtn)
                Div.Size = UDim2.new(1, -30, 0, 1); Div.Position = UDim2.new(0, 15, 0, 0)
                Div.BackgroundColor3 = Library.Theme.Divider; Div.BorderSizePixel = 0

                OptBtn.MouseButton1Click:Connect(function()
                    Selected.Text = opt
                    Library.Flags[flag] = opt
                    if callback then callback(opt) end
                    Expanded = false
                    TweenService:Create(DropFrame, TweenInfo.new(0.2), {Size = UDim2.new(0.9, 0, 0, 44)}):Play()
                end)
            end

            Trigger.MouseButton1Click:Connect(function()
                Expanded = not Expanded
                local Height = Expanded and (44 + (#options * 44)) or 44
                TweenService:Create(DropFrame, TweenInfo.new(0.2), {Size = UDim2.new(0.9, 0, 0, Height)}):Play()
            end)
        end

        -- 7. INTERACTIVE: Keybind
        function Tab:AddKeybind(title, flag, default, callback)
            Library.Flags[flag] = default
            local Container = Instance.new("Frame", Page)
            Container.Size = UDim2.new(0.9, 0, 0, 44)
            Container.BackgroundColor3 = Library.Theme.Card
            Instance.new("UICorner", Container).CornerRadius = UDim.new(0, 10)

            local T = Instance.new("TextLabel", Container)
            T.Text = title; T.Position = UDim2.new(0, 15, 0, 0); T.Size = UDim2.new(0.6, 0, 1, 0)
            T.TextColor3 = Library.Theme.Text; T.Font = Enum.Font.Gotham; T.TextSize = 16
            T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left

            local BindBtn = Instance.new("TextButton", Container)
            BindBtn.Size = UDim2.new(0, 80, 0, 30); BindBtn.Position = UDim2.new(1, -15, 0.5, -15)
            BindBtn.AnchorPoint = Vector2.new(1, 0)
            BindBtn.BackgroundColor3 = Color3.fromRGB(44, 44, 46); BindBtn.Text = default.Name
            BindBtn.TextColor3 = Library.Theme.SubText; BindBtn.Font = Enum.Font.Gotham; BindBtn.TextSize = 14
            Instance.new("UICorner", BindBtn).CornerRadius = UDim.new(0, 6)

            local listening = false
            BindBtn.MouseButton1Click:Connect(function()
                listening = true; BindBtn.Text = "Press Key..."; BindBtn.TextColor3 = Library.Theme.Accent
            end)

            UserInputService.InputBegan:Connect(function(input)
                if listening and input.UserInputType == Enum.UserInputType.Keyboard then
                    Library.Flags[flag] = input.KeyCode
                    BindBtn.Text = input.KeyCode.Name
                    BindBtn.TextColor3 = Library.Theme.SubText
                    listening = false
                    if callback then callback(input.KeyCode) end
                end
            end)
        end

        -- 8. INTERACTIVE: ColorPicker
        function Tab:AddColorPicker(title, flag, default, callback)
            Library.Flags[flag] = default or Color3.new(1,1,1)
            local Expanded = false
            
            local Container = Instance.new("Frame", Page)
            Container.Size = UDim2.new(0.9, 0, 0, 44); Container.BackgroundColor3 = Library.Theme.Card
            Container.ClipsDescendants = true
            Instance.new("UICorner", Container).CornerRadius = UDim.new(0, 10)

            local T = Instance.new("TextLabel", Container)
            T.Text = title; T.Position = UDim2.new(0, 15, 0, 0); T.Size = UDim2.new(0.5, 0, 0, 44)
            T.TextColor3 = Library.Theme.Text; T.Font = Enum.Font.Gotham; T.TextSize = 16
            T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left

            local Preview = Instance.new("Frame", Container)
            Preview.Size = UDim2.new(0, 24, 0, 24); Preview.Position = UDim2.new(1, -15, 0, 10)
            Preview.AnchorPoint = Vector2.new(1, 0); Preview.BackgroundColor3 = default
            Instance.new("UICorner", Preview).CornerRadius = UDim.new(1, 0)

            local Trigger = Instance.new("TextButton", Container)
            Trigger.Size = UDim2.new(1, 0, 0, 44); Trigger.BackgroundTransparency = 1; Trigger.Text = ""

            -- Sliders
            local Sliders = Instance.new("Frame", Container)
            Sliders.Size = UDim2.new(1, 0, 0, 100); Sliders.Position = UDim2.new(0, 0, 0, 44)
            Sliders.BackgroundTransparency = 1

            local function MakeRGB(name, y, col)
                local F = Instance.new("Frame", Sliders)
                F.Size = UDim2.new(0.8, 0, 0, 4); F.Position = UDim2.new(0.1, 0, 0, y)
                F.BackgroundColor3 = Color3.fromRGB(58, 58, 60); Instance.new("UICorner", F)
                local Fil = Instance.new("Frame", F); Fil.Size = UDim2.new(1, 0, 1, 0); Fil.BackgroundColor3 = col; Instance.new("UICorner", Fil)
                local B = Instance.new("TextButton", F); B.Size = UDim2.new(1, 0, 4, 0); B.Position = UDim2.new(0,0,-1.5,0); B.BackgroundTransparency = 1; B.Text = ""
                return B, Fil
            end

            local R_Btn, R_Fill = MakeRGB("R", 20, Color3.fromRGB(255, 59, 48))
            local G_Btn, G_Fill = MakeRGB("G", 50, Color3.fromRGB(52, 199, 89))
            local B_Btn, B_Fill = MakeRGB("B", 80, Color3.fromRGB(0, 122, 255))

            local function Update()
                local c = Color3.new(R_Fill.Size.X.Scale, G_Fill.Size.X.Scale, B_Fill.Size.X.Scale)
                Preview.BackgroundColor3 = c
                Library.Flags[flag] = c
                if callback then callback(c) end
            end

            local function Drag(btn, fill)
                btn.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then
                    local c = RunService.RenderStepped:Connect(function()
                        local p = math.clamp((Mouse.X - btn.AbsolutePosition.X)/btn.AbsoluteSize.X, 0, 1)
                        fill.Size = UDim2.new(p, 0, 1, 0); Update()
                    end)
                    i.Changed:Connect(function() if i.UserInputState == Enum.UserInputState.End then c:Disconnect() end end)
                end end)
            end
            Drag(R_Btn, R_Fill); Drag(G_Btn, G_Fill); Drag(B_Btn, B_Fill)

            Trigger.MouseButton1Click:Connect(function()
                Expanded = not Expanded
                TweenService:Create(Container, TweenInfo.new(0.2), {Size = UDim2.new(0.9, 0, 0, Expanded and 150 or 44)}):Play()
            end)
        end

        -- 9. UTILITY: Label & Paragraph
        function Tab:AddLabel(text)
            local L = Instance.new("TextLabel", Page)
            L.Size = UDim2.new(0.9, 0, 0, 30); L.Text = text; L.TextColor3 = Library.Theme.SubText
            L.Font = Enum.Font.Gotham; L.TextSize = 14; L.BackgroundTransparency = 1; L.TextXAlignment = Enum.TextXAlignment.Left
        end

        function Tab:AddParagraph(title, content)
            local Container = Instance.new("Frame", Page)
            Container.Size = UDim2.new(0.9, 0, 0, 0); Container.BackgroundColor3 = Library.Theme.Card
            Instance.new("UICorner", Container).CornerRadius = UDim.new(0, 10)
            
            local T = Instance.new("TextLabel", Container)
            T.Text = title; T.Position = UDim2.new(0, 15, 0, 10); T.Size = UDim2.new(1, -30, 0, 20)
            T.TextColor3 = Library.Theme.Text; T.Font = Enum.Font.GothamMedium; T.TextSize = 16
            T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left
            
            local C = Instance.new("TextLabel", Container)
            C.Text = content; C.Position = UDim2.new(0, 15, 0, 35); C.Size = UDim2.new(1, -30, 0, 0)
            C.TextColor3 = Library.Theme.SubText; C.Font = Enum.Font.Gotham; C.TextSize = 14
            C.BackgroundTransparency = 1; C.TextXAlignment = Enum.TextXAlignment.Left; C.TextWrapped = true; C.AutomaticSize = Enum.AutomaticSize.Y
            
            C:GetPropertyChangedSignal("AbsoluteSize"):Connect(function() Container.Size = UDim2.new(0.9, 0, 0, C.AbsoluteSize.Y + 45) end)
        end

        return Tab
    end
    
    function Window:AddNotification(title, content)
        local Notif = Instance.new("Frame", ScreenGui)
        Notif.Size = UDim2.new(0, 300, 0, 70); Notif.Position = UDim2.new(0.5, -150, 0, -100)
        Notif.BackgroundColor3 = Color3.fromRGB(30, 30, 30); Notif.BorderSizePixel = 0
        Instance.new("UICorner", Notif).CornerRadius = UDim.new(0, 12)
        
        local I = Instance.new("ImageLabel", Notif) -- App Icon placeholder
        I.Size = UDim2.new(0, 40, 0, 40); I.Position = UDim2.new(0, 15, 0.5, -20)
        I.BackgroundColor3 = Library.Theme.Accent; Instance.new("UICorner", I).CornerRadius = UDim.new(0, 8)
        
        local T = Instance.new("TextLabel", Notif)
        T.Text = title; T.Position = UDim2.new(0, 65, 0, 15); T.TextColor3 = Library.Theme.Text
        T.Font = Enum.Font.GothamBold; T.TextSize = 14; T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left

        local D = Instance.new("TextLabel", Notif)
        D.Text = content; D.Position = UDim2.new(0, 65, 0, 35); D.TextColor3 = Library.Theme.SubText
        D.Font = Enum.Font.Gotham; D.TextSize = 12; D.BackgroundTransparency = 1; D.TextXAlignment = Enum.TextXAlignment.Left

        TweenService:Create(Notif, TweenInfo.new(0.5, Enum.EasingStyle.Quart), {Position = UDim2.new(0.5, -150, 0, 20)}):Play()
        task.wait(3)
        TweenService:Create(Notif, TweenInfo.new(0.5, Enum.EasingStyle.Quart), {Position = UDim2.new(0.5, -150, 0, -100)}):Play()
        task.wait(0.5); Notif:Destroy()
    end

    function Window:SetTheme(newTheme)
        -- Logic to update colors dynamically (omitted for brevity, but supported via Library.Theme table)
        Library.Theme = newTheme
    end

    -- // FORCED TABS //
    local SettingsTab = Window:AddTab("Settings")
    SettingsTab:AddSection("Application")
    SettingsTab:AddButton("Unload Library", function() ScreenGui:Destroy() end)
    SettingsTab:AddToggle("Dark Mode", "Use dark appearance", "DarkMode", true, function(v) end)

    local ConfigTab = Window:AddTab("Config")
    ConfigTab:AddSection("Profile")
    ConfigTab:AddTextbox("Config Name", "ConfName", "Default", function() end)
    ConfigTab:AddButton("Save Configuration", function() Window:AddNotification("Saved", "Config saved successfully") end)
    ConfigTab:AddButton("Load Configuration", function() Window:AddNotification("Loaded", "Config loaded successfully") end)

    return Window
end

return Library
